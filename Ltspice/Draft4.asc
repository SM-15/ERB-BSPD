Version 4
SHEET 1 2136 696
WIRE 736 -448 624 -448
WIRE 736 -400 736 -448
WIRE 624 -384 624 -448
WIRE 736 -208 736 -320
WIRE 416 -160 320 -160
WIRE 112 -128 64 -128
WIRE 224 -128 192 -128
WIRE 688 -128 656 -128
WIRE 992 -128 976 -128
WIRE 976 -112 976 -128
WIRE 976 -112 896 -112
WIRE 992 -112 976 -112
WIRE 1136 -112 1056 -112
WIRE 736 -96 736 -112
WIRE 896 -96 896 -112
WIRE 896 -96 736 -96
WIRE 976 -96 944 -96
WIRE 992 -96 976 -96
WIRE 976 -80 976 -96
WIRE 992 -80 976 -80
WIRE -752 -64 -848 -64
WIRE 736 -64 736 -96
WIRE 976 -64 976 -80
WIRE 992 -64 976 -64
WIRE 1136 -64 1136 -112
WIRE 1216 -64 1136 -64
WIRE -576 -48 -624 -48
WIRE 1136 -48 1136 -64
WIRE 1136 -48 928 -48
WIRE 320 -32 320 -160
WIRE 224 -16 224 -128
WIRE 288 -16 224 -16
WIRE 944 -16 944 -96
WIRE 1136 -16 944 -16
WIRE 656 0 656 -128
WIRE 656 0 352 0
WIRE -96 16 -160 16
WIRE 32 16 -16 16
WIRE 288 16 32 16
WIRE -624 32 -624 -48
WIRE -624 32 -704 32
WIRE 992 32 960 32
WIRE 992 48 976 48
WIRE 1136 48 1136 -16
WIRE 1136 48 1056 48
WIRE -704 64 -704 32
WIRE 736 64 736 16
WIRE 928 64 928 -48
WIRE 960 64 960 32
WIRE 960 64 928 64
WIRE 976 64 976 48
WIRE 976 64 960 64
WIRE 992 64 976 64
WIRE -752 80 -752 -64
WIRE -736 80 -752 80
WIRE 912 80 800 80
WIRE 976 80 912 80
WIRE 992 80 976 80
WIRE 1648 80 1584 80
WIRE 2000 80 1648 80
WIRE -480 96 -672 96
WIRE 800 96 800 80
WIRE 976 96 976 80
WIRE 992 96 976 96
WIRE -896 112 -928 112
WIRE -736 112 -816 112
WIRE 800 112 800 96
WIRE -928 128 -928 112
WIRE 912 128 912 80
WIRE -624 160 -624 32
WIRE -624 160 -704 160
WIRE -480 160 -480 96
WIRE -320 160 -480 160
WIRE -160 160 -160 16
WIRE -160 160 -256 160
WIRE 2000 176 2000 80
WIRE -704 192 -704 160
WIRE -320 192 -480 192
WIRE 1952 192 1760 192
WIRE -912 208 -928 208
WIRE -736 208 -832 208
WIRE -928 224 -928 208
WIRE -480 224 -480 192
WIRE -480 224 -672 224
WIRE 1648 224 1648 80
WIRE 1760 224 1760 192
WIRE 1760 224 1648 224
WIRE -736 240 -816 240
WIRE 1760 240 1760 224
WIRE 1952 240 1904 240
WIRE 1904 272 1904 240
WIRE 1216 288 1216 -64
WIRE 1248 288 1216 288
WIRE 1552 288 1312 288
WIRE 1648 288 1648 224
WIRE 1552 304 1552 288
WIRE 1616 304 1552 304
WIRE 1248 320 1216 320
WIRE 1760 320 1680 320
WIRE 1840 320 1760 320
WIRE 400 336 336 336
WIRE 1552 336 1472 336
WIRE 1616 336 1552 336
WIRE 400 352 400 336
WIRE 1840 352 1840 320
WIRE 1856 352 1840 352
WIRE 1472 368 1472 336
WIRE 1552 368 1552 336
WIRE 32 400 16 400
WIRE 256 400 112 400
WIRE 1472 464 1472 448
WIRE 336 496 336 336
WIRE 256 512 256 400
WIRE 304 512 256 512
WIRE 1216 528 1216 320
WIRE 1216 528 368 528
WIRE -160 544 -160 160
WIRE -64 544 -160 544
WIRE 64 544 16 544
WIRE 304 544 64 544
WIRE 64 592 64 544
FLAG -704 128 0
FLAG -704 256 0
FLAG 64 656 0
FLAG 336 560 0
FLAG 32 80 0
FLAG -576 32 0
FLAG 624 -384 0
FLAG 736 64 0
FLAG 800 256 0
FLAG 912 208 0
FLAG 320 32 0
FLAG 400 432 0
FLAG 416 -80 0
FLAG -928 128 0
FLAG -928 224 0
FLAG -848 16 0
FLAG -816 320 0
FLAG 64 -128 0
FLAG 16 400 0
FLAG 1472 544 0
FLAG 1552 448 0
FLAG 1648 352 0
FLAG 1584 160 0
FLAG 1904 368 0
FLAG 2000 256 0
SYMBOL cap 48 592 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMATTR SpiceLine V=4 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GRM219R60G476ME44" type="X5R"
SYMBOL res 32 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 63 60 VBottom 2
SYMATTR InstName R1
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 0 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 66 59 VBottom 2
SYMATTR InstName R2
SYMATTR Value 100K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL Digital\\or 1024 -160 R0
WINDOW 3 -8 36 Left 2
SYMATTR Value VHigh = 3, VLow = 0
SYMATTR InstName A1
SYMBOL Digital\\or 1024 0 R0
WINDOW 3 -8 36 Left 2
SYMATTR Value VHigh = 3, VLow = 0
SYMATTR InstName A2
SYMBOL voltage -576 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS1
SYMATTR Value 5
SYMBOL voltage 736 -304 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS2
SYMATTR Value 5
SYMBOL res 720 -80 R0
SYMATTR InstName R3
SYMATTR Value 200000
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 800 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 56 Left 2
SYMATTR InstName LVMS3
SYMATTR Value PULSE(0 5 12 5 5 1)
SYMBOL res 896 112 R0
SYMATTR InstName R4
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 416 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS4
SYMATTR Value 5
SYMBOL voltage 400 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Left 1
SYMATTR InstName LVMS5
SYMATTR Value 5
SYMBOL voltage -848 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Left 1
SYMATTR InstName V_FRN_SOGLIA1
SYMATTR Value 3
SYMBOL voltage -800 112 R90
WINDOW 0 -32 56 VBottom 1
WINDOW 3 -4 56 VBottom 1
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_FRN_VAL1
SYMATTR Value PULSE(0 5 0 5 0 10)
SYMBOL voltage -816 208 R90
WINDOW 0 -32 56 VBottom 1
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_PW_SOGLIA1
SYMATTR Value 3.5
SYMBOL voltage -816 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 43 59 Left 1
WINDOW 3 43 87 Left 1
SYMATTR InstName V_PW_EROGATA1
SYMATTR Value PULSE(0 5 0 8 0 20)
SYMBOL Digital\\and -288 112 R0
WINDOW 3 -34 149 Left 2
SYMATTR Value Vhigh = 5, VLow = 0
SYMATTR InstName A3
SYMBOL Digital\\or 1280 240 R0
WINDOW 3 -8 36 Left 2
SYMATTR Value VLow = 0, VHigh= 3
SYMATTR InstName A4
SYMBOL cap 16 16 R0
WINDOW 3 36 49 Left 2
SYMATTR Value 100µ
SYMATTR InstName C3
SYMATTR SpiceLine V=4 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GRM21BR60G107ME11" type="X5R"
SYMBOL voltage 208 -128 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 4.2
SYMBOL voltage 128 400 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.8
SYMBOL nmos 688 -208 R0
SYMATTR InstName M1
SYMBOL OpAmps\\LT1001 -704 160 R0
SYMATTR InstName U2
SYMBOL OpAmps\\LT1001 -704 32 R0
SYMATTR InstName U3
SYMBOL res 1456 352 R0
SYMATTR InstName R5
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 1472 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 40 56 Left 2
SYMATTR InstName LVMS6
SYMATTR Value 5
SYMBOL res 1536 352 R0
SYMATTR InstName R6
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 1584 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 51 Left 2
SYMATTR InstName LVMS7
SYMATTR Value 24
SYMBOL nmos 1856 272 R0
SYMATTR InstName M2
SYMBOL res 1744 224 R0
SYMATTR InstName R7
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL OpAmps\\UniversalOpAmp 1648 320 R0
WINDOW 0 6 -34 Left 1
SYMATTR InstName COMP_ON_OFF1
SYMBOL OpAmps\\LT1001 320 -64 R0
SYMATTR InstName U1
SYMBOL OpAmps\\LT1001 336 464 R0
SYMATTR InstName U4
SYMBOL res 784 80 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL sw 2000 160 R0
SYMATTR InstName S1
TEXT -16 -248 Center 1 ;SE CONDIZIONE DI NON SICUREZZA >10S
TEXT 1048 -216 Center 1 ;UTILIZZO IL LATCH PER MEMORIZZARE ERRORE >10S
TEXT -160 -216 Left 1 ;OUT = 1 (= VDD, NO SAFE)
TEXT 128 600 Left 1 ;SE CONDIZIONE DI NON SICUREZZA >500MS
TEXT 128 624 Left 1 ;OUT = 1 ( = VDD, NO SAFE)
TEXT 840 -192 Left 1 ;RESET MANUALE TRAMITE POWER CYCLE
TEXT 864 256 Left 1 ;POWER CYCLE
TEXT 96 -64 Left 1 ;Val di soglia
TEXT 160 512 Left 1 ;Val di soglia
TEXT -944 680 Left 2 !.tran 30
