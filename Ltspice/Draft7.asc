Version 4
SHEET 1 3736 1172
WIRE -1072 -576 -1136 -576
WIRE -1072 -544 -1072 -576
WIRE -1664 -480 -1680 -480
WIRE -1680 -464 -1680 -480
WIRE -1136 -464 -1136 -576
WIRE -1136 -464 -1216 -464
WIRE -1216 -448 -1216 -464
WIRE -1584 -432 -1584 -480
WIRE -1248 -432 -1584 -432
WIRE -976 -416 -1184 -416
WIRE -1248 -400 -1680 -400
WIRE -976 -384 -976 -416
WIRE -896 -384 -976 -384
WIRE -768 -384 -832 -384
WIRE -896 -368 -976 -368
WIRE -896 -352 -944 -352
WIRE -1136 -336 -1136 -464
WIRE -1136 -336 -1216 -336
WIRE -896 -336 -912 -336
WIRE -1216 -304 -1216 -336
WIRE -1584 -288 -1584 -432
WIRE -1248 -288 -1584 -288
WIRE -976 -272 -976 -368
WIRE -976 -272 -1184 -272
WIRE -1248 -256 -1744 -256
WIRE 176 -256 -336 -256
WIRE 976 -256 400 -256
WIRE -2208 -192 -2240 -192
WIRE -2016 -192 -2208 -192
WIRE -1680 -192 -1680 -400
WIRE -1680 -192 -2016 -192
WIRE 176 -176 -16 -176
WIRE 496 -176 400 -176
WIRE 688 -176 496 -176
WIRE 816 -176 688 -176
WIRE -2016 -160 -2016 -192
WIRE -1136 -160 -1136 -336
WIRE -1136 -160 -1216 -160
WIRE 816 -160 816 -176
WIRE -1680 -144 -1680 -192
WIRE -1248 -144 -1680 -144
WIRE -944 -128 -944 -352
WIRE -944 -128 -1184 -128
WIRE 688 -128 688 -176
WIRE -1248 -112 -1504 -112
WIRE 176 -96 80 -96
WIRE 496 -96 400 -96
WIRE -1136 0 -1136 -160
WIRE -1136 0 -1216 0
WIRE -768 0 -768 -384
WIRE -496 0 -768 0
WIRE -336 0 -336 -256
WIRE -336 0 -432 0
WIRE -16 0 -16 -176
WIRE 80 0 80 -16
WIRE 496 0 496 -16
WIRE 688 0 688 -64
WIRE 816 0 816 -80
WIRE 2032 0 2000 0
WIRE 2144 0 2112 0
WIRE -1744 16 -1744 -256
WIRE -1248 16 -1744 16
WIRE -912 32 -912 -336
WIRE -912 32 -1184 32
WIRE 2144 32 2144 0
WIRE -1504 48 -1504 -112
WIRE -1248 48 -1504 48
WIRE -496 48 -528 48
WIRE -1504 80 -1504 48
WIRE 1936 80 1808 80
WIRE 2000 80 2000 0
WIRE 2000 80 1936 80
WIRE 2176 96 2080 96
WIRE 1808 112 1808 80
WIRE 1936 144 1936 80
WIRE 2000 144 2000 80
WIRE 2000 144 1968 144
WIRE 2080 144 2080 96
WIRE 2000 160 2000 144
WIRE 2032 160 2000 160
WIRE 1808 192 1808 176
WIRE 2032 208 2000 208
WIRE 2000 224 2000 208
WIRE 2000 224 1968 224
WIRE 1536 240 1520 240
WIRE 976 256 976 -256
WIRE 1520 256 1520 240
WIRE 1520 256 976 256
WIRE 1536 256 1520 256
WIRE -1136 272 -1136 0
WIRE -1136 272 -1216 272
WIRE 1536 272 1520 272
WIRE 1520 288 1520 272
WIRE 1520 288 1504 288
WIRE 1536 288 1520 288
WIRE 1680 288 1600 288
WIRE 1808 288 1808 272
WIRE 1936 288 1936 208
WIRE 1936 288 1808 288
WIRE 2000 288 2000 224
WIRE 2000 288 1936 288
WIRE 2080 288 2080 224
WIRE 2176 288 2080 288
WIRE -1216 304 -1216 272
WIRE 1520 304 1520 288
WIRE 1536 304 1520 304
WIRE 1680 304 1680 288
WIRE 1760 304 1680 304
WIRE -1504 320 -1568 320
WIRE -1248 320 -1424 320
WIRE 1680 320 1680 304
WIRE 1680 320 1488 320
WIRE 2000 320 2000 288
WIRE -1568 336 -1568 320
WIRE -992 336 -1184 336
WIRE -2192 352 -2240 352
WIRE -2000 352 -2192 352
WIRE -1744 352 -1744 16
WIRE -1744 352 -2000 352
WIRE -1680 352 -1680 -144
WIRE -1248 352 -1680 352
WIRE 1504 352 1504 288
WIRE 1680 352 1504 352
WIRE -2000 384 -2000 352
WIRE -1136 400 -1136 272
WIRE -1136 400 -1216 400
WIRE -992 400 -992 336
WIRE -832 400 -992 400
WIRE -528 400 -528 48
WIRE -528 400 -768 400
WIRE 1536 400 1504 400
WIRE 1760 400 1760 304
WIRE 1808 400 1760 400
WIRE 1952 400 1888 400
WIRE 1488 416 1488 320
WIRE 1504 416 1504 400
WIRE 1504 416 1488 416
WIRE 1536 416 1520 416
WIRE -1216 432 -1216 400
WIRE -832 432 -992 432
WIRE -336 432 -336 0
WIRE -192 432 -336 432
WIRE 176 432 -128 432
WIRE 976 432 400 432
WIRE 1504 432 1504 416
WIRE 1520 432 1520 416
WIRE 1520 432 1504 432
WIRE 1536 432 1520 432
WIRE 1760 432 1760 400
WIRE -1504 448 -1568 448
WIRE -1248 448 -1424 448
WIRE 1520 448 1472 448
WIRE 1536 448 1520 448
WIRE 1680 448 1680 352
WIRE 1680 448 1600 448
WIRE -1568 464 -1568 448
WIRE -992 464 -992 432
WIRE -992 464 -1184 464
WIRE 1520 464 1520 448
WIRE 1536 464 1520 464
WIRE -1248 480 -1328 480
WIRE 2000 496 2000 416
WIRE 176 512 -16 512
WIRE 496 512 400 512
WIRE 688 512 496 512
WIRE 816 512 688 512
WIRE 816 528 816 512
WIRE -1744 560 -1744 352
WIRE -1328 560 -1328 480
WIRE -1328 560 -1744 560
WIRE 688 560 688 512
WIRE 176 592 80 592
WIRE 496 592 400 592
WIRE 1472 640 1472 448
WIRE 1472 640 1216 640
WIRE 976 656 976 432
WIRE 1152 656 976 656
WIRE 1152 672 976 672
WIRE -16 688 -16 512
WIRE 80 688 80 672
WIRE 496 688 496 672
WIRE 688 688 688 624
WIRE 816 688 816 608
WIRE 288 816 240 816
WIRE 240 864 240 816
WIRE 288 864 288 816
WIRE 240 976 240 944
WIRE 240 1056 96 1056
WIRE 352 1056 240 1056
WIRE 976 1056 976 672
WIRE 976 1056 416 1056
WIRE 240 1072 240 1056
WIRE 96 1152 96 1136
WIRE 240 1152 240 1136
FLAG -2240 -192 V_BRAKE
IOPIN -2240 -192 In
FLAG -2240 352 V_MOTOR_POWER
IOPIN -2240 352 In
FLAG -16 0 0
FLAG 80 0 0
FLAG 816 0 0
FLAG 496 0 0
FLAG 688 0 0
FLAG -16 688 0
FLAG 80 688 0
FLAG 816 688 0
FLAG 496 688 0
FLAG 688 688 0
FLAG 96 1152 0
FLAG 288 864 0
FLAG 240 1152 0
FLAG 2000 496 0
FLAG 1760 512 0
FLAG 2144 32 0
FLAG -2192 432 0
FLAG -2208 -112 0
FLAG -1568 464 0
FLAG -1072 -464 0
FLAG -1568 336 0
FLAG -2000 464 0
FLAG -2016 -80 0
FLAG -1680 -464 0
FLAG -1504 160 0
FLAG 2176 288 SDC_IN
IOPIN 2176 288 In
FLAG 2176 96 SDC_OUT
IOPIN 2176 96 Out
SYMBOL Digital\\or 1568 208 R0
SYMATTR InstName A1
SYMBOL Digital\\or 1568 368 R0
SYMATTR InstName A2
SYMBOL voltage -1072 -560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS1
SYMATTR Value 5
SYMBOL voltage -1408 320 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -48 -44 VRight 1
WINDOW 3 -22 88 VRight 2
SYMATTR InstName V_BRAKE_THRESHOLD1
SYMATTR Value 3
SYMBOL Digital\\and -800 352 R0
WINDOW 3 -34 149 Left 2
SYMATTR Value Vhigh = 5, VLow = 0
SYMATTR InstName A3
SYMBOL OpAmps\\LT1001 -1216 400 R0
SYMATTR InstName U1
SYMBOL OpAmps\\LT1001 -1216 272 R0
SYMATTR InstName U2
SYMBOL nmos 1952 320 R0
SYMATTR InstName M2
SYMBOL Digital\\or 1184 592 R0
SYMATTR InstName A4
SYMBOL Digital\\inv -192 368 R0
SYMATTR InstName A5
SYMBOL OpAmps\\LT1001 -1216 -192 R0
SYMATTR InstName U5
SYMBOL OpAmps\\LT1001 -1216 -336 R0
SYMATTR InstName U6
SYMBOL OpAmps\\LT1001 -1216 -480 R0
SYMATTR InstName U7
SYMBOL Digital\\or -864 -432 R0
SYMATTR InstName A6
SYMBOL Digital\\or -464 -48 R0
SYMATTR InstName A7
SYMBOL OpAmps\\LT1001 -1216 -32 R0
SYMATTR InstName U8
SYMBOL voltage -1408 448 R90
WINDOW 0 -49 -63 VRight 1
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 20 95 VRight 2
SYMATTR InstName V_MOTOR_PWR_THRESHOLD1
SYMATTR Value 3.5
SYMBOL voltage -2208 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -159 147 Left 2
SYMATTR Value PULSE(0 5 0 0 0 12 24 2)
SYMATTR InstName V6
SYMBOL voltage -2192 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -125 137 Left 2
SYMATTR Value PULSE(0 5 4 0 0 12 24 2)
SYMATTR InstName V7
SYMBOL SpecialFunctions\\LTC6994-1 288 -176 R0
SYMATTR InstName U4
SYMBOL res 64 -112 R0
SYMATTR InstName R2
SYMATTR Value 768000
SYMATTR SpiceLine tol=1 pwr=0.125
SYMBOL voltage 816 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res 480 -192 R0
SYMATTR InstName R3
SYMATTR Value 1000000
SYMATTR SpiceLine tol=1 pwr=0.125
SYMBOL res 480 -112 R0
SYMATTR InstName R9
SYMATTR Value 523000
SYMATTR SpiceLine tol=1 pwr=0.125
SYMBOL cap 672 -128 R0
SYMATTR InstName C1
SYMATTR Value 100nF
SYMATTR SpiceLine V=16
SYMBOL SpecialFunctions\\LTC6994-1 288 512 R0
SYMATTR InstName U3
SYMBOL res 64 576 R0
SYMATTR InstName R11
SYMATTR Value 249000
SYMATTR SpiceLine tol=1 pwr=0.125
SYMBOL voltage 816 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 480 496 R0
SYMATTR InstName R12
SYMATTR Value 1000000
SYMATTR SpiceLine tol=1 pwr=0.125
SYMBOL res 480 576 R0
SYMATTR InstName R13
SYMATTR Value 887000
SYMATTR SpiceLine tol=1 pwr=0.125
SYMBOL cap 672 560 R0
SYMATTR InstName C2
SYMATTR Value 100nF
SYMATTR SpiceLine V=16
SYMBOL res 80 1040 R0
SYMATTR InstName R10
SYMATTR Value 200000
SYMBOL Digital\\schmtinv 352 992 R0
SYMATTR InstName A8
SYMBOL res 224 960 R0
SYMATTR InstName R14
SYMATTR Value 33000
SYMBOL voltage 240 960 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL cap 224 1072 R0
SYMATTR InstName C3
SYMATTR Value 22µF
SYMBOL res 1744 416 R0
SYMATTR InstName R4
SYMATTR Value 22000
SYMBOL res 1904 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5000
SYMBOL LED 1792 112 R0
SYMATTR InstName D2
SYMBOL res 1792 176 R0
SYMATTR InstName R15
SYMATTR Value 10000
SYMATTR SpiceLine tol=5 pwr=0.125
SYMBOL diode 1952 208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL voltage 2016 0 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 24
SYMBOL res -2032 -176 R0
SYMATTR InstName R1
SYMATTR Value 47000
SYMBOL res -2016 368 R0
SYMATTR InstName R5
SYMATTR Value 47000
SYMBOL voltage -1568 -480 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -48 -44 VRight 1
WINDOW 3 -22 88 VRight 2
SYMATTR InstName V_BRAKE_THRESHOLD2
SYMATTR Value 4
SYMBOL voltage -1504 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 1
SYMBOL res 1952 128 R0
SYMATTR InstName R7
SYMATTR Value 3000
SYMBOL sw 2080 240 M180
SYMATTR InstName S1
TEXT 240 784 Left 1 ;POWER CYCLE -> SET LATCH
TEXT -1464 -304 Left 1 ;MOTOR SHORT CIRCUIT
TEXT -1464 -448 Left 1 ;BRAKE SHORT CIRCUIT
TEXT -1456 -24 Left 1 ;MOTOR OPEN CIRCUIT
TEXT -1456 -192 Left 1 ;BRAKE OPEN CIRCUIT
TEXT -1504 -576 Left 1 ;SHORT_CIRCUIT_THRESHOLD
TEXT 128 -328 Left 1 ;IF FAULT > 500ms -> RESET LATCH
TEXT -1808 840 Left 2 !.tran 30
TEXT 128 360 Left 1 ;IF NORMAL CONDITIONS FOR MORE THAN 10s -> SET LATCH
