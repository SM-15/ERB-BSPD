Version 4
SHEET 1 2104 916
WIRE 624 -720 512 -720
WIRE -1024 -704 -1152 -704
WIRE 624 -672 624 -720
WIRE -1376 -656 -1440 -656
WIRE -1248 -656 -1376 -656
WIRE 512 -656 512 -720
WIRE -1152 -576 -1152 -704
WIRE -1072 -576 -1152 -576
WIRE -1152 -560 -1152 -576
WIRE -1248 -544 -1248 -656
WIRE -1184 -544 -1248 -544
WIRE -912 -528 -1120 -528
WIRE 2048 -528 1888 -528
WIRE -1184 -512 -1296 -512
WIRE -1040 -496 -1152 -496
WIRE -912 -496 -912 -528
WIRE -832 -496 -912 -496
WIRE -704 -496 -768 -496
WIRE -832 -480 -912 -480
WIRE 624 -480 624 -592
WIRE -832 -464 -880 -464
WIRE 272 -464 208 -464
WIRE -1072 -448 -1072 -576
WIRE -1072 -448 -1152 -448
WIRE -832 -448 -848 -448
WIRE 272 -448 272 -464
WIRE -1152 -416 -1152 -448
WIRE -1184 -400 -1232 -400
WIRE -96 -400 -112 -400
WIRE 128 -400 -16 -400
WIRE 576 -400 544 -400
WIRE 880 -400 864 -400
WIRE -912 -384 -912 -480
WIRE -912 -384 -1120 -384
WIRE 864 -384 864 -400
WIRE 864 -384 784 -384
WIRE 880 -384 864 -384
WIRE 1024 -384 944 -384
WIRE 1536 -384 1472 -384
WIRE 1888 -384 1888 -528
WIRE 2000 -384 1888 -384
WIRE -1184 -368 -1296 -368
WIRE 624 -368 624 -384
WIRE 784 -368 784 -384
WIRE 784 -368 624 -368
WIRE 864 -368 832 -368
WIRE 880 -368 864 -368
WIRE -1040 -352 -1040 -496
WIRE -1040 -352 -1152 -352
WIRE 864 -352 864 -368
WIRE 880 -352 864 -352
WIRE 624 -336 624 -368
WIRE 864 -336 864 -352
WIRE 880 -336 864 -336
WIRE 1024 -336 1024 -384
WIRE 1264 -336 1024 -336
WIRE 1024 -320 1024 -336
WIRE 1024 -320 816 -320
WIRE 2000 -320 2000 -384
WIRE 208 -304 208 -464
WIRE 128 -288 128 -400
WIRE 176 -288 128 -288
WIRE 832 -288 832 -368
WIRE 1024 -288 832 -288
WIRE 1888 -288 1888 -384
WIRE -1072 -272 -1072 -448
WIRE -1072 -272 -1152 -272
WIRE 544 -272 544 -400
WIRE 544 -272 240 -272
WIRE 1536 -272 1536 -384
WIRE 1648 -272 1536 -272
WIRE 1840 -272 1648 -272
WIRE -1440 -256 -1440 -656
WIRE -1184 -256 -1440 -256
WIRE -192 -256 -272 -256
WIRE -64 -256 -112 -256
WIRE 176 -256 -64 -256
WIRE -880 -240 -880 -464
WIRE -880 -240 -1120 -240
WIRE 880 -240 848 -240
WIRE -1184 -224 -1264 -224
WIRE 880 -224 864 -224
WIRE 1024 -224 1024 -288
WIRE 1024 -224 944 -224
WIRE 1648 -224 1648 -272
WIRE 1840 -224 1792 -224
WIRE -1040 -208 -1040 -352
WIRE -1040 -208 -1152 -208
WIRE -64 -208 -64 -256
WIRE 624 -208 624 -256
WIRE 816 -208 816 -320
WIRE 848 -208 848 -240
WIRE 848 -208 816 -208
WIRE 864 -208 864 -224
WIRE 864 -208 848 -208
WIRE 880 -208 864 -208
WIRE 864 -192 848 -192
WIRE 880 -192 864 -192
WIRE 1792 -192 1792 -224
WIRE 1888 -192 1888 -208
WIRE 2000 -192 2000 -256
WIRE 2000 -192 1888 -192
WIRE 864 -176 864 -192
WIRE 880 -176 864 -176
WIRE 1536 -176 1536 -272
WIRE 1264 -160 1264 -336
WIRE 1504 -160 1264 -160
WIRE 1888 -160 1888 -192
WIRE 1648 -144 1568 -144
WIRE 1728 -144 1648 -144
WIRE 1440 -128 1360 -128
WIRE 1504 -128 1440 -128
WIRE -1072 -112 -1072 -272
WIRE -1072 -112 -1152 -112
WIRE -704 -112 -704 -496
WIRE -432 -112 -704 -112
WIRE -272 -112 -272 -256
WIRE -272 -112 -368 -112
WIRE 1728 -112 1728 -144
WIRE 1744 -112 1728 -112
WIRE -1184 -96 -1232 -96
WIRE 1360 -96 1360 -128
WIRE 1440 -96 1440 -128
WIRE -848 -80 -848 -448
WIRE -848 -80 -1120 -80
WIRE -432 -80 -464 -80
WIRE -1184 -64 -1264 -64
WIRE -1152 -32 -1152 -48
WIRE -1040 -32 -1040 -208
WIRE -1040 -32 -1152 -32
WIRE -1152 -16 -1152 -32
WIRE 352 0 256 0
WIRE 1360 0 1360 -16
WIRE 48 32 0 32
WIRE 160 32 128 32
WIRE -1200 64 -1296 64
WIRE -1024 80 -1072 80
WIRE 256 128 256 0
WIRE 160 144 160 32
WIRE 224 144 160 144
WIRE -1072 160 -1072 80
WIRE -1072 160 -1152 160
WIRE 528 160 288 160
WIRE -272 176 -272 -112
WIRE -240 176 -272 176
WIRE -160 176 -176 176
WIRE -32 176 -80 176
WIRE 224 176 -32 176
WIRE -1152 192 -1152 160
WIRE 528 192 528 160
WIRE 624 192 528 192
WIRE 848 192 848 -192
WIRE 848 192 688 192
WIRE -1200 208 -1200 64
WIRE -1184 208 -1200 208
WIRE -928 224 -1120 224
WIRE 624 224 528 224
WIRE -1184 240 -1264 240
WIRE -1072 288 -1072 160
WIRE -1072 288 -1152 288
WIRE -928 288 -928 224
WIRE -768 288 -928 288
WIRE -464 288 -464 -80
WIRE -464 288 -704 288
WIRE -1280 304 -1536 304
WIRE -1536 320 -1536 304
WIRE -1152 320 -1152 288
WIRE -768 320 -928 320
WIRE 208 320 96 320
WIRE 528 320 528 224
WIRE 528 320 208 320
WIRE -1280 336 -1280 304
WIRE -1184 336 -1280 336
WIRE 96 336 96 320
WIRE -928 352 -928 320
WIRE -928 352 -1120 352
WIRE -1184 368 -1264 368
WIRE 208 368 208 320
FLAG -1152 256 0
FLAG -1152 384 0
FLAG -64 -144 0
FLAG 208 -240 0
FLAG -32 240 0
FLAG -1024 160 0
FLAG 512 -656 0
FLAG 96 496 0
FLAG 208 448 0
FLAG 256 192 0
FLAG 272 -368 0
FLAG 352 80 0
FLAG -1296 144 0
FLAG 0 32 0
FLAG -112 -400 0
FLAG 1360 80 0
FLAG 1440 -16 0
FLAG 1536 -112 0
FLAG 1472 -304 0
FLAG 1792 -96 0
FLAG 1888 -160 0
FLAG 624 -208 0
FLAG -1296 -512 ACC_V
IOPIN -1296 -512 In
FLAG -1232 -400 ACC_V
IOPIN -1232 -400 In
FLAG -1152 -16 0
FLAG -1264 -224 BRAKE_V
IOPIN -1264 -224 In
FLAG -1232 -96 BRAKE_V
IOPIN -1232 -96 In
FLAG -1376 -576 0
FLAG -1264 240 V_HARD_BRAKE
IOPIN -1264 240 In
FLAG -1264 368 V_PWR_MOTOR
IOPIN -1264 368 In
FLAG -1536 400 0
FLAG -1296 -368 THRESHOLD_OC
IOPIN -1296 -368 In
FLAG -1264 -64 THRESHOLD_OC
IOPIN -1264 -64 In
FLAG 2048 -448 0
SYMBOL cap -80 -208 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMATTR SpiceLine V=4 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GRM219R60G476ME44" type="X5R"
SYMBOL res -96 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 63 60 VBottom 2
SYMATTR InstName R1
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -64 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 66 59 VBottom 2
SYMATTR InstName R2
SYMATTR Value 100K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL Digital\\or 912 -432 R0
SYMATTR InstName A1
SYMBOL Digital\\or 912 -272 R0
SYMATTR InstName A2
SYMBOL voltage -1024 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS1
SYMATTR Value 5
SYMBOL voltage 624 -576 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS2
SYMATTR Value 5
SYMBOL res 608 -352 R0
SYMATTR InstName R3
SYMATTR Value 200K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 96 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 56 Left 2
WINDOW 3 -103 147 Left 2
SYMATTR InstName LVMS3
SYMATTR Value ""
SYMBOL res 192 352 R0
SYMATTR InstName R4
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 352 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS4
SYMATTR Value 5
SYMBOL voltage 272 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Left 1
SYMATTR InstName LVMS5
SYMATTR Value 5
SYMBOL voltage -1296 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -15 -3 Left 1
SYMATTR InstName V_BRAKE_THRESHOLD
SYMATTR Value 3
SYMBOL Digital\\and -736 240 R0
WINDOW 3 -34 149 Left 2
SYMATTR Value Vhigh = 5, VLow = 0
SYMATTR InstName A3
SYMBOL cap -48 176 R0
WINDOW 3 36 49 Left 2
SYMATTR Value 100µ
SYMATTR InstName C2
SYMATTR SpiceLine V=4 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GRM21BR60G107ME11" type="X5R"
SYMBOL voltage 144 32 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 4.2
SYMBOL voltage 0 -400 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.8
SYMBOL nmos 576 -480 R0
SYMATTR InstName M1
SYMBOL OpAmps\\LT1001 -1152 288 R0
SYMATTR InstName U1
SYMBOL OpAmps\\LT1001 -1152 160 R0
SYMATTR InstName U2
SYMBOL res 1344 -112 R0
SYMATTR InstName R5
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 1360 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 40 56 Left 2
SYMATTR InstName LVMS6
SYMATTR Value 5
SYMBOL res 1424 -112 R0
SYMATTR InstName R6
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 1472 -400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 51 Left 2
SYMATTR InstName LVMS7
SYMATTR Value 24
SYMBOL nmos 1744 -192 R0
SYMATTR InstName M2
SYMBOL res 1632 -240 R0
SYMATTR InstName R7
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL OpAmps\\UniversalOpAmp 1536 -144 R0
WINDOW 0 6 -34 Left 1
SYMATTR InstName COMP_ON_OFF1
SYMBOL OpAmps\\LT1001 256 96 R0
SYMATTR InstName U3
SYMBOL OpAmps\\LT1001 208 -336 R0
SYMATTR InstName U4
SYMBOL res 80 320 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL sw 1888 -304 R0
WINDOW 3 26 92 Left 2
SYMATTR InstName Relè
SYMBOL Digital\\or 656 144 R0
SYMATTR InstName A5
SYMBOL Digital\\inv -240 112 R0
SYMATTR InstName A4
SYMBOL OpAmps\\LT1001 -1152 -304 R0
SYMATTR InstName U5
SYMBOL OpAmps\\LT1001 -1152 -448 R0
SYMATTR InstName U6
SYMBOL OpAmps\\LT1001 -1152 -592 R0
SYMATTR InstName U7
SYMBOL voltage -1024 -720 R0
SYMATTR InstName V3
SYMBOL Digital\\or -800 -544 R0
SYMATTR InstName A6
SYMBOL Digital\\or -400 -160 R0
SYMATTR InstName A7
SYMBOL voltage -1376 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 4.5
SYMBOL OpAmps\\LT1001 -1152 -144 R0
SYMATTR InstName U8
SYMBOL voltage -1536 304 R0
WINDOW 0 24 16 Left 1
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_MOTOR_PWR_THRESHOLD
SYMATTR Value 3.5
SYMBOL diode 2016 -256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL voltage 2048 -544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 51 Left 2
SYMATTR InstName LVMS8
SYMATTR Value 24
SYMBOL Misc\\NE555 128 -640 R0
SYMATTR InstName U9
SYMBOL Misc\\NE555 528 528 R0
SYMATTR InstName U10
TEXT 160 496 Left 1 ;POWER CYCLE
TEXT 32 96 Left 1 ;THRESHOLD
TEXT -8 -384 Left 1 ;THRESHOLD
TEXT -1392 664 Left 2 !.tran 30
TEXT -1408 -472 Left 1 ;MOTOR SHORT CIRCUIT
TEXT -1408 -192 Left 1 ;BRAKE SHORT CIRCUIT
TEXT -1376 -424 Left 1 ;MOTOR OPEN CIRCUIT
TEXT -1384 -120 Left 1 ;BRAKE OPEN CIRCUIT
TEXT -1440 -688 Left 1 ;SHORT_CIRCUIT_THRESHOLD
TEXT 72 224 Left 1 ;SAFE FOR >10s -> RESET LATCH
TEXT 24 -208 Left 1 ;IF FAULT > 500ms -> SET LATCH HIGH
