Version 4
SHEET 1 3736 964
WIRE -16 -672 -128 -672
WIRE 928 -672 816 -672
WIRE 928 -656 928 -672
WIRE -128 -640 -128 -672
WIRE -16 -624 -16 -672
WIRE 688 -624 384 -624
WIRE -1088 -592 -1216 -592
WIRE -1440 -544 -1504 -544
WIRE -1312 -544 -1440 -544
WIRE 432 -512 288 -512
WIRE 816 -512 816 -672
WIRE 816 -512 656 -512
WIRE 288 -496 288 -512
WIRE -1216 -464 -1216 -592
WIRE -1136 -464 -1216 -464
WIRE -1216 -448 -1216 -464
WIRE -16 -448 -16 -560
WIRE 384 -448 384 -624
WIRE 384 -448 -16 -448
WIRE 432 -448 384 -448
WIRE 720 -448 656 -448
WIRE 816 -448 816 -512
WIRE 816 -448 800 -448
WIRE -1312 -432 -1312 -544
WIRE -1248 -432 -1312 -432
WIRE -976 -416 -1184 -416
WIRE -1248 -400 -1360 -400
WIRE -1104 -384 -1216 -384
WIRE -976 -384 -976 -416
WIRE -896 -384 -976 -384
WIRE -768 -384 -832 -384
WIRE 432 -384 384 -384
WIRE 688 -384 688 -624
WIRE 688 -384 656 -384
WIRE -896 -368 -976 -368
WIRE -896 -352 -944 -352
WIRE -1136 -336 -1136 -464
WIRE -1136 -336 -1216 -336
WIRE -896 -336 -912 -336
WIRE -16 -336 -16 -448
WIRE 432 -320 352 -320
WIRE 688 -320 656 -320
WIRE -1216 -304 -1216 -336
WIRE -1248 -288 -1296 -288
WIRE -976 -272 -976 -368
WIRE -976 -272 -1184 -272
WIRE -1248 -256 -1360 -256
WIRE -1104 -240 -1104 -384
WIRE -1104 -240 -1216 -240
WIRE 384 -224 384 -384
WIRE 1088 -224 384 -224
WIRE -16 -192 -16 -256
WIRE -1136 -160 -1136 -336
WIRE -1136 -160 -1216 -160
WIRE 688 -160 688 -320
WIRE -1504 -144 -1504 -544
WIRE -1248 -144 -1504 -144
WIRE -288 -144 -336 -144
WIRE -240 -144 -288 -144
WIRE -144 -144 -160 -144
WIRE -80 -144 -144 -144
WIRE -944 -128 -944 -352
WIRE -944 -128 -1184 -128
WIRE -1248 -112 -1328 -112
WIRE -1104 -96 -1104 -240
WIRE -1104 -96 -1216 -96
WIRE 3200 -96 3040 -96
WIRE -288 -64 -288 -144
WIRE 272 -64 -288 -64
WIRE 352 -64 352 -320
WIRE -144 -48 -144 -144
WIRE -1136 0 -1136 -160
WIRE -1136 0 -1216 0
WIRE -768 0 -768 -384
WIRE -496 0 -768 0
WIRE -336 0 -336 -144
WIRE -336 0 -432 0
WIRE 352 0 352 -64
WIRE -1248 16 -1296 16
WIRE -912 32 -912 -336
WIRE -912 32 -1184 32
WIRE -496 32 -528 32
WIRE 2032 32 2016 32
WIRE -1248 48 -1328 48
WIRE 2016 48 2016 32
WIRE 2016 48 1936 48
WIRE 2032 48 2016 48
WIRE 2176 48 2096 48
WIRE 2688 48 2624 48
WIRE 3040 48 3040 -96
WIRE 3152 48 3040 48
WIRE 1088 64 1088 -224
WIRE 1936 64 1936 48
WIRE 1936 64 1088 64
WIRE 2016 64 1984 64
WIRE 2032 64 2016 64
WIRE -1216 80 -1216 64
WIRE -1104 80 -1104 -96
WIRE -1104 80 -1216 80
WIRE -144 80 -144 32
WIRE -16 80 -16 -96
WIRE 2016 80 2016 64
WIRE 2032 80 2016 80
WIRE -1216 96 -1216 80
WIRE 2016 96 2016 80
WIRE 2032 96 2016 96
WIRE 2176 96 2176 48
WIRE 2416 96 2176 96
WIRE 2176 112 2176 96
WIRE 2176 112 1968 112
WIRE 3152 112 3152 48
WIRE 1984 144 1984 64
WIRE 2176 144 1984 144
WIRE 2688 160 2688 48
WIRE 2800 160 2688 160
WIRE 3040 160 3040 48
WIRE 3040 160 2800 160
WIRE -1264 176 -1360 176
WIRE -1088 192 -1136 192
WIRE 2032 192 2000 192
WIRE 2032 208 2016 208
WIRE 2176 208 2176 144
WIRE 2176 208 2096 208
WIRE 2800 208 2800 160
WIRE 3040 208 3040 160
WIRE 3040 208 2944 208
WIRE 1968 224 1968 112
WIRE 2000 224 2000 192
WIRE 2000 224 1968 224
WIRE 2016 224 2016 208
WIRE 2016 224 2000 224
WIRE 2032 224 2016 224
WIRE 2016 240 1968 240
WIRE 2032 240 2016 240
WIRE 2944 240 2944 208
WIRE 3040 240 3040 208
WIRE 3152 240 3152 176
WIRE 3152 240 3040 240
WIRE -1392 256 -1776 256
WIRE 2016 256 2016 240
WIRE 2032 256 2016 256
WIRE 2688 256 2688 160
WIRE -1136 272 -1136 192
WIRE -1136 272 -1216 272
WIRE 2416 272 2416 96
WIRE 2656 272 2416 272
WIRE 3040 272 3040 240
WIRE 2800 288 2720 288
WIRE 2880 288 2800 288
WIRE -1392 304 -1392 256
WIRE -1328 304 -1392 304
WIRE -1216 304 -1216 272
WIRE 2592 304 2512 304
WIRE 2656 304 2592 304
WIRE -1264 320 -1264 176
WIRE -1248 320 -1264 320
WIRE 656 320 560 320
WIRE 2880 320 2880 288
WIRE 2896 320 2880 320
WIRE -992 336 -1184 336
WIRE 2512 336 2512 304
WIRE 2592 336 2592 304
WIRE -1328 352 -1328 304
WIRE -1248 352 -1328 352
WIRE 352 352 304 352
WIRE 464 352 432 352
WIRE -1136 400 -1136 272
WIRE -1136 400 -1216 400
WIRE -992 400 -992 336
WIRE -832 400 -992 400
WIRE -528 400 -528 32
WIRE -528 400 -768 400
WIRE -1344 416 -1600 416
WIRE -1600 432 -1600 416
WIRE -1216 432 -1216 400
WIRE -832 432 -992 432
WIRE 2512 432 2512 416
WIRE -1344 448 -1344 416
WIRE -1248 448 -1344 448
WIRE 560 448 560 320
WIRE -992 464 -992 432
WIRE -992 464 -1184 464
WIRE 464 464 464 352
WIRE 528 464 464 464
WIRE -1248 480 -1328 480
WIRE 832 480 592 480
WIRE -336 496 -336 0
WIRE -224 496 -336 496
WIRE -128 496 -160 496
WIRE 0 496 -48 496
WIRE 96 496 0 496
WIRE 528 496 96 496
WIRE 832 512 832 480
WIRE 928 512 832 512
WIRE 1968 512 1968 240
WIRE 1968 512 992 512
WIRE 928 544 832 544
WIRE -1328 560 -1328 480
WIRE -1328 560 -1776 560
WIRE 512 640 400 640
WIRE 832 640 832 544
WIRE 832 640 512 640
WIRE 400 656 400 640
WIRE 512 688 512 640
FLAG -1216 368 0
FLAG -1216 496 0
FLAG -1088 272 0
FLAG 400 816 0
FLAG 512 768 0
FLAG 560 512 0
FLAG 656 400 0
FLAG -1360 256 0
FLAG 304 352 0
FLAG 2512 512 0
FLAG 2592 416 0
FLAG 2688 320 0
FLAG 2624 128 0
FLAG 2944 336 0
FLAG 3040 272 0
FLAG -1360 -400 ACC_V
IOPIN -1360 -400 In
FLAG -1296 -288 ACC_V
IOPIN -1296 -288 In
FLAG -1216 96 0
FLAG -1328 -112 BRAKE_V
IOPIN -1328 -112 In
FLAG -1296 16 BRAKE_V
IOPIN -1296 16 In
FLAG -1440 -464 0
FLAG -1328 352 V_HARD_BRAKE
IOPIN -1328 352 In
FLAG -1328 480 V_PWR_MOTOR
IOPIN -1328 480 In
FLAG -1600 512 0
FLAG -1360 -256 THRESHOLD_OC
IOPIN -1360 -256 In
FLAG -1328 48 THRESHOLD_OC
IOPIN -1328 48 In
FLAG 3200 -16 0
FLAG -16 80 0
FLAG -144 80 0
FLAG -128 -560 0
FLAG 352 64 0
FLAG 928 -576 0
FLAG 288 -496 0
FLAG 688 -96 0
FLAG 0 560 0
FLAG 96 576 0
FLAG -1088 -512 0
FLAG -1776 336 0
FLAG -1776 640 0
SYMBOL Digital\\or 2064 0 R0
SYMATTR InstName A1
SYMBOL Digital\\or 2064 160 R0
SYMATTR InstName A2
SYMBOL voltage -1088 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS1
SYMATTR Value 5
SYMBOL voltage 400 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 56 Left 2
WINDOW 3 -103 147 Left 2
SYMATTR InstName LVMS3
SYMATTR Value ""
SYMBOL res 496 672 R0
SYMATTR InstName R4
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 656 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName LVMS4
SYMATTR Value 5
SYMBOL voltage -1360 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -15 -3 Left 1
SYMATTR InstName V_BRAKE_THRESHOLD1
SYMATTR Value 3
SYMBOL Digital\\and -800 352 R0
WINDOW 3 -34 149 Left 2
SYMATTR Value Vhigh = 5, VLow = 0
SYMATTR InstName A3
SYMBOL voltage 448 352 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 4
SYMBOL OpAmps\\LT1001 -1216 400 R0
SYMATTR InstName U1
SYMBOL OpAmps\\LT1001 -1216 272 R0
SYMATTR InstName U2
SYMBOL res 2496 320 R0
SYMATTR InstName R5
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 2512 416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 40 56 Left 2
SYMATTR InstName LVMS6
SYMATTR Value 5
SYMBOL res 2576 320 R0
SYMATTR InstName R6
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage 2624 32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 51 Left 2
SYMATTR InstName LVMS7
SYMATTR Value 24
SYMBOL nmos 2896 240 R0
SYMATTR InstName M2
SYMBOL res 2784 192 R0
SYMATTR InstName R7
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL OpAmps\\UniversalOpAmp 2688 288 R0
WINDOW 0 6 -34 Left 1
SYMATTR InstName COMP_ON_OFF1
SYMBOL OpAmps\\LT1001 560 416 R0
SYMATTR InstName U3
SYMBOL res 384 640 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL Digital\\or 960 464 R0
SYMATTR InstName A4
SYMBOL Digital\\inv -224 432 R0
SYMATTR InstName A5
SYMBOL OpAmps\\LT1001 -1216 -192 R0
SYMATTR InstName U5
SYMBOL OpAmps\\LT1001 -1216 -336 R0
SYMATTR InstName U6
SYMBOL OpAmps\\LT1001 -1216 -480 R0
SYMATTR InstName U7
SYMBOL voltage -1088 -608 R0
SYMATTR InstName V3
SYMBOL Digital\\or -864 -432 R0
SYMATTR InstName A6
SYMBOL Digital\\or -464 -48 R0
SYMATTR InstName A7
SYMBOL voltage -1440 -560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR InstName V4
SYMATTR Value 3
SYMBOL OpAmps\\LT1001 -1216 -32 R0
SYMATTR InstName U8
SYMBOL voltage -1600 416 R0
WINDOW 0 24 16 Left 1
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_MOTOR_PWR_THRESHOLD1
SYMATTR Value 3.5
SYMBOL diode 3168 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL voltage 3200 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -106 51 Left 2
SYMATTR InstName LVMS8
SYMATTR Value 24
SYMBOL Misc\\NE555 544 -416 R0
SYMATTR InstName U4
SYMBOL res -144 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -128 48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL npn -80 -192 R0
SYMATTR InstName Q1
SYMBOL res -32 -352 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL cap -32 -624 R0
SYMATTR InstName C1
SYMATTR Value 4.7µ
SYMBOL voltage -128 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res 368 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL cap 336 0 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL voltage 928 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL res 816 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL cap 672 -160 R0
SYMATTR InstName C3
SYMATTR Value 10n
SYMBOL res -32 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 66 59 VBottom 2
SYMATTR InstName R11
SYMATTR Value 100K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL cap -16 496 R0
WINDOW 3 36 49 Left 2
SYMATTR Value 100µ
SYMATTR InstName C4
SYMATTR SpiceLine V=4 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GRM21BR60G107ME11" type="X5R"
SYMBOL res 80 480 R0
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL voltage -1776 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 0 0 0 12 24 2)
SYMBOL voltage -1776 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 5 4 0 0 12 24 2)
TEXT 464 816 Left 1 ;POWER CYCLE
TEXT 336 416 Left 1 ;THRESHOLD
TEXT -1472 -360 Left 1 ;MOTOR SHORT CIRCUIT
TEXT -1472 -80 Left 1 ;BRAKE SHORT CIRCUIT
TEXT -1440 -312 Left 1 ;MOTOR OPEN CIRCUIT
TEXT -1448 -8 Left 1 ;BRAKE OPEN CIRCUIT
TEXT -1504 -576 Left 1 ;SHORT_CIRCUIT_THRESHOLD
TEXT 464 552 Left 1 ;SAFE FOR >10s -> RESET LATCH
TEXT 648 704 Left 1 ;IF FAULT > 500ms -> SET LATCH HIGH
TEXT -1808 840 Left 2 !.tran 30
